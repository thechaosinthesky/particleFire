var ParticleFire={App:{},init:function(){},initControlPanel:function(){this.App.profiles=new ParticleFire.Collections.Profile([]),this.App.controlPanel=new ParticleFire.Views.ControlPanel({el:"#profiles"}),this.App.router=new ParticleFire.Routers.ControlPanel({})},login:function(a){},properties:{},Templates:{},Models:{},Collections:{},Views:{},Routers:{}};ParticleFire.Templates.Loader='<span>LOADING&nbsp;&nbsp;&nbsp;<i class="fa fa-fire fa-spin"></i></span>',ParticleFire.Templates.Loader_Profiles='<li class="active"><a>LOADING</a></li> <li><a><span><i class="fa fa-fire fa-spin"></i></span></a></li>',ParticleFire.Templates.ProfileTab='\n<li class="<%= classes %>" role="presentation"><a href="#<%= profile_content_id %>" aria-controls="#<%= profile_content_id %>" role="tab" data-toggle="tab">\n<%= name %></a></li>',ParticleFire.Templates.TabProfileContent='\n<div role="tabpanel" class="tab-pane <%= classes %>" id="<%= profile_content_id %>"></div>',ParticleFire.Templates.Profile='\n<table id="ios" class="table table-striped">  <tbody class="io-list">    <tr>      <td class="cell-io-name active"> <i class="fa fa-gg"></i>&nbsp;&nbsp;        LOADING      </td>      <td class="cell-io-content"><span><i class="fa fa-fire fa-spin"></i></span></td>    </tr>  </tbody>  <tfoot>    <tr>      <td class="cell-io-name cell-io-new text-center">        <div class="io-new">          <div id="newIO" class="btn-new-io btn btn-primary"><i class="fa fa-plus-circle"></i>&nbsp;            I/O          </div>        </div>      </td>      <td class="cell-io-content"> </td>    </tr>  </tfoot></table>',ParticleFire.Templates.IO='\n<tr>  <td class="cell-io-name active"> <i class="fa fa-gg"></i>&nbsp;&nbsp;    <%= name %>  </td>  <td id="<%= id %>" class="cell-io-content">Open/Closed</td></tr>',ParticleFire.Models.IO=Backbone.Model.extend({initialize:function(){}}),ParticleFire.Collections.IO=Backbone.Collection.extend({model:ParticleFire.Models.IO,url:function(){return"/profiles/"+this.profile_id+"/io"},initialize:function(a){this.profile_id=a.profile_id}}),ParticleFire.Models.Profile=Backbone.Model.extend({initialize:function(){}}),ParticleFire.Collections.Profile=Backbone.Collection.extend({model:ParticleFire.Models.Profile,url:function(){return"/profiles"},initialize:function(){}}),ParticleFire.Views.ControlPanel=Backbone.View.extend({events:{"click .add-profile":"addProfile"},initialize:function(a){this.profile_id=a.profile_id,this.$profileList=this.$(".profile-list"),this.$profileListContent=this.$(".profile-tab-content"),this.collection=ParticleFire.App.profiles,this.profileViews=[],this.listenTo(this.collection,"sync",this.render),this.templates={profileTab:_.template(ParticleFire.Templates.ProfileTab),profileContent:_.template(ParticleFire.Templates.TabProfileContent)},this.render()},render:function(){this.collection.length>0?(this.profile_id||(this.profile_id=this.collection.at(0).id),this.$profileList.html(""),this.renderAllProfiles()):this.$profileList.html(ParticleFire.Templates.Loader_Profiles)},loadProfiles:function(){this.collection.fetch()},renderAllProfiles:function(){var a=this;_.each(this.collection.models,function(b){a.renderProfile(b)})},renderProfile:function(a){var b=a.toJSON(),c="profile-"+a.id,d=b.id==this.profile_id;b.profile_content_id=c,b.classes=d?"active":"",b.active=d,this.$profileList.append(this.templates.profileTab(b)),this.$profileListContent.append(this.templates.profileContent(b));var e=new ParticleFire.Views.Profile({el:"#"+c,model:a});this.profileViews.push(e),d&&e.activate()},addProfile:function(){}}),ParticleFire.Views.Profile=Backbone.View.extend({events:{"click .add-io":"addIO"},initialize:function(a){this.model=a.model,this.active=!1,this.collection=new ParticleFire.Collections.IO([],{profile_id:this.model.id}),this.listenTo(this.collection,"sync",this.render),this.templates={profile:_.template(ParticleFire.Templates.Profile),IO:_.template(ParticleFire.Templates.IO)},this.render()},render:function(){var a=this.model.toJSON();console.log(this.$el),this.$el.html(this.templates.profile(a)),this.$IOList=this.$(".io-list"),this.collection.length>0&&(this.$IOList.html(""),this.renderAllIOs())},activate:function(){this.active=!0,this.loadIOs()},loadIOs:function(){this.collection.fetch()},renderAllIOs:function(){var a=this;_.each(this.collection.models,function(b){a.renderIO(b)})},renderIO:function(a){var b=a.toJSON();this.$IOList.append(this.templates.IO(b))},addIO:function(){}}),ParticleFire.Routers.ControlPanel=Backbone.Router.extend({routes:{"":"initRoute","control-panel":"load"},initialize:function(a){Backbone.history.start()},initRoute:function(){this.navigate("control-panel",{trigger:!0,replace:!0})},load:function(){ParticleFire.App.controlPanel.loadProfiles()}});